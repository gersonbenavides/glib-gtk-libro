<!DOCTYPE HTML>
<html lang="es" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Listas - La plataforma de desarrollo GLib/GTK</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../../../favicon.svg">
        <link rel="shortcut icon" href="../../../favicon.png">
        <link rel="stylesheet" href="../../../css/variables.css">
        <link rel="stylesheet" href="../../../css/general.css">
        <link rel="stylesheet" href="../../../css/chrome.css">
        <link rel="stylesheet" href="../../../css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../../highlight.css">
        <link rel="stylesheet" href="../../../tomorrow-night.css">
        <link rel="stylesheet" href="../../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../../.././src/assets/css/custom.css">
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../../../content/book/struct/title.html">La plataforma de desarrollo GLib/GTK</a></li><li class="chapter-item expanded "><a href="../../../content/intro/chpt/intro.html"><strong aria-hidden="true">1.</strong> Introducci贸n</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../content/intro/sect/glib-gtk.html"><strong aria-hidden="true">1.1.</strong> 驴Qu茅 es GLib y GTK?</a></li><li class="chapter-item expanded "><a href="../../../content/intro/sect/gnome-dskt.html"><strong aria-hidden="true">1.2.</strong> El escritorio GNOME</a></li><li class="chapter-item expanded "><a href="../../../content/intro/sect/preq.html"><strong aria-hidden="true">1.3.</strong> Prerrequisitos</a></li><li class="chapter-item expanded "><a href="../../../content/intro/sect/why-when-c.html"><strong aria-hidden="true">1.4.</strong> 驴Por qu茅 y cu谩ndo se usa el lenguaje C?</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../content/intro/sect/sep-backend.html"><strong aria-hidden="true">1.4.1.</strong> Separaci贸n de backend del frontend</a></li><li class="chapter-item expanded "><a href="../../../content/intro/sect/other-aspects.html"><strong aria-hidden="true">1.4.2.</strong> Otros aspectos a tener en cuenta</a></li></ol></li><li class="chapter-item expanded "><a href="../../../content/intro/sect/lrn-path.html"><strong aria-hidden="true">1.5.</strong> Ruta de aprendizaje</a></li><li class="chapter-item expanded "><a href="../../../content/intro/sect/dev-env.html"><strong aria-hidden="true">1.6.</strong> El entorno de desarrollo</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><li class="part-title">GLib, la biblioteca principal</li><li class="chapter-item expanded "><a href="../../../content/glib/chpt/glib.html"><strong aria-hidden="true">2.</strong> GLib, la biblioteca principal</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../content/glib/basics/basics.html"><strong aria-hidden="true">2.1.</strong> Lo esencial</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../content/glib/basics/type-def.html"><strong aria-hidden="true">2.1.1.</strong> Definiciones de tipo</a></li><li class="chapter-item expanded "><a href="../../../content/glib/basics/freq-macros.html"><strong aria-hidden="true">2.1.2.</strong> Macros de uso frecuente</a></li><li class="chapter-item expanded "><a href="../../../content/glib/basics/dbg-macros.html"><strong aria-hidden="true">2.1.3.</strong> Macros de depuraci贸n</a></li><li class="chapter-item expanded "><a href="../../../content/glib/basics/mem.html"><strong aria-hidden="true">2.1.4.</strong> Memoria</a></li><li class="chapter-item expanded "><a href="../../../content/glib/basics/str-hdlg.html"><strong aria-hidden="true">2.1.5.</strong> Manejo de string</a></li></ol></li><li class="chapter-item expanded "><a href="../../../content/glib/data-struct/data-struct.html"><strong aria-hidden="true">2.2.</strong> Estructura de datos</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../content/glib/data-struct/lists.html" class="active"><strong aria-hidden="true">2.2.1.</strong> Listas</a></li><li class="chapter-item expanded "><a href="../../../content/glib/data-struct/trees.html"><strong aria-hidden="true">2.2.2.</strong> rboles</a></li><li class="chapter-item expanded "><a href="../../../content/glib/data-struct/hash-tables.html"><strong aria-hidden="true">2.2.3.</strong> Tablas hash</a></li></ol></li><li class="chapter-item expanded "><a href="../../../content/glib/sect/main-loop.html"><strong aria-hidden="true">2.3.</strong> El bucle del evento principal</a></li><li class="chapter-item expanded "><a href="../../../content/glib/sect/other-feat.html"><strong aria-hidden="true">2.4.</strong> Otras caracter铆sticas</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Programaci贸n orientada a objetos en C</li><li class="chapter-item expanded "><a href="../../../content/oop-semi/chpt/oop-semi.html"><strong aria-hidden="true">3.</strong> Programaci贸n semi-orientada a objetos en C</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../content/oop-semi/hdr-ex/hdr-ex.html"><strong aria-hidden="true">3.1.</strong> Ejemplo de encabezado</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../content/oop-semi/hdr-ex/prj-names.html"><strong aria-hidden="true">3.1.1.</strong> Espacio de nombres del proyecto</a></li><li class="chapter-item expanded "><a href="../../../content/oop-semi/hdr-ex/class-names.html"><strong aria-hidden="true">3.1.2.</strong> Espacio de nombres de clase</a></li><li class="chapter-item expanded "><a href="../../../content/oop-semi/hdr-ex/letter-case.html"><strong aria-hidden="true">3.1.3.</strong> 驴Min煤sculas, May煤sculas o CamelCase?</a></li><li class="chapter-item expanded "><a href="../../../content/oop-semi/hdr-ex/incl-guard.html"><strong aria-hidden="true">3.1.4.</strong> Incluir guardia</a></li><li class="chapter-item expanded "><a href="../../../content/oop-semi/hdr-ex/cpp-supt.html"><strong aria-hidden="true">3.1.5.</strong> Soporte de C++</a></li><li class="chapter-item expanded "><a href="../../../content/oop-semi/hdr-ex/incl.html"><strong aria-hidden="true">3.1.6.</strong> #include</a></li><li class="chapter-item expanded "><a href="../../../content/oop-semi/hdr-ex/type-def.html"><strong aria-hidden="true">3.1.7.</strong> Definici贸n de tipo</a></li><li class="chapter-item expanded "><a href="../../../content/oop-semi/hdr-ex/obj-ctor.html"><strong aria-hidden="true">3.1.8.</strong> Constructor de objetos</a></li><li class="chapter-item expanded "><a href="../../../content/oop-semi/hdr-ex/obj-dtor.html"><strong aria-hidden="true">3.1.9.</strong> Destructor de objetos</a></li><li class="chapter-item expanded "><a href="../../../content/oop-semi/hdr-ex/other-func.html"><strong aria-hidden="true">3.1.10.</strong> Otras funciones p煤blicas</a></li></ol></li><li class="chapter-item expanded "><a href="../../../content/oop-semi/c-file/c-file.html"><strong aria-hidden="true">3.2.</strong> El archivo *.c correspondiente</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../content/oop-semi/c-file/order-incl.html"><strong aria-hidden="true">3.2.1.</strong> Orden de #include</a></li><li class="chapter-item expanded "><a href="../../../content/oop-semi/c-file/gtk-doc-cmnt.html"><strong aria-hidden="true">3.2.2.</strong> Comentarios de GTK-Doc</a></li><li class="chapter-item expanded "><a href="../../../content/oop-semi/c-file/gobj-introsp.html"><strong aria-hidden="true">3.2.3.</strong> Anotaciones de introspecci贸n de GObject</a></li><li class="chapter-item expanded "><a href="../../../content/oop-semi/c-file/stc-vs-non-stc.html"><strong aria-hidden="true">3.2.4.</strong> Funciones est谩ticas vs funciones no est谩ticas</a></li><li class="chapter-item expanded "><a href="../../../content/oop-semi/c-file/defen-prog.html"><strong aria-hidden="true">3.2.5.</strong> Programaci贸n defensiva</a></li><li class="chapter-item expanded "><a href="../../../content/oop-semi/c-file/coding-style.html"><strong aria-hidden="true">3.2.6.</strong> Estilo de codificaci贸n</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../../content/oop-gobj/chpt/oop-gobj.html"><strong aria-hidden="true">4.</strong> Una suave introducci贸n a GObject</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../content/oop-gobj/sect/inherit.html"><strong aria-hidden="true">4.1.</strong> Herencia</a></li><li class="chapter-item expanded "><a href="../../../content/oop-gobj/sect/gobj-macros.html"><strong aria-hidden="true">4.2.</strong> Macros de GObject</a></li><li class="chapter-item expanded "><a href="../../../content/oop-gobj/sect/intfc.html"><strong aria-hidden="true">4.3.</strong> Interfaces</a></li><li class="chapter-item expanded "><a href="../../../content/oop-gobj/ref-cnt/ref-cnt.html"><strong aria-hidden="true">4.4.</strong> Recuento de referencias</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../content/oop-gobj/ref-cnt/avoid-ref.html"><strong aria-hidden="true">4.4.1.</strong> Evitar ciclos de referencia con referencias d茅biles</a></li><li class="chapter-item expanded "><a href="../../../content/oop-gobj/ref-cnt/float-ref.html"><strong aria-hidden="true">4.4.2.</strong> Referencias flotantes</a></li></ol></li><li class="chapter-item expanded "><a href="../../../content/oop-gobj/sig-prop/sig-prop.html"><strong aria-hidden="true">4.5.</strong> Se帽ales y propiedades</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../content/oop-gobj/sig-prop/cnct-callb-sig.html"><strong aria-hidden="true">4.5.1.</strong> Conexi贸n de una funci贸n de devoluci贸n de llamada a una se帽al</a></li><li class="chapter-item expanded "><a href="../../../content/oop-gobj/sig-prop/disc-sig.html"><strong aria-hidden="true">4.5.2.</strong> Desconexi贸n de controladores de se帽ales</a></li><li class="chapter-item expanded "><a href="../../../content/oop-gobj/sig-prop/prop.html"><strong aria-hidden="true">4.5.3.</strong> Propiedades</a></li></ol></li></ol></li><li class="chapter-item expanded "><li class="part-title">GTK</li><li class="chapter-item expanded "><a href="../../../content/gtk-app-arch/chpt/gtk-app-arch.html"><strong aria-hidden="true">5.</strong> Ejemplo de una arquitectura de c贸digo de aplicaci贸n GTK</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../content/gtk-app-arch/sect/main-func.html"><strong aria-hidden="true">5.1.</strong> La funci贸n main() y GeditApp</a></li><li class="chapter-item expanded "><a href="../../../content/gtk-app-arch/sect/geditwindow.html"><strong aria-hidden="true">5.2.</strong> GeditWindow</a></li><li class="chapter-item expanded "><a href="../../../content/gtk-app-arch/sect/geditnotebook.html"><strong aria-hidden="true">5.3.</strong> GeditNotebook y lo que contiene</a></li><li class="chapter-item expanded "><a href="../../../content/gtk-app-arch/sect/why-when-sub-class.html"><strong aria-hidden="true">5.4.</strong> 驴Por qu茅 y cu谩ndo crear subclases de widgets GTK?</a></li><li class="chapter-item expanded "><a href="../../../content/gtk-app-arch/sect/comp-widg.html"><strong aria-hidden="true">5.5.</strong> Widgets compuestos</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Lectura adicional</li><li class="chapter-item expanded "><a href="../../../content/fthr-rdg/chpt/fthr-rdg.html"><strong aria-hidden="true">6.</strong> Lecturas adicionales</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../content/fthr-rdg/sect/gtk-gio.html"><strong aria-hidden="true">6.1.</strong> GTK y GIO</a></li><li class="chapter-item expanded "><a href="../../../content/fthr-rdg/sect/wrtg-gobj-class.html"><strong aria-hidden="true">6.2.</strong> Escribir sus propias clases de GObject</a></li><li class="chapter-item expanded "><a href="../../../content/fthr-rdg/bld-sys/bld-sys.html"><strong aria-hidden="true">6.3.</strong> Sistema de compilaci贸n</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../content/fthr-rdg/bld-sys/autotools.html"><strong aria-hidden="true">6.3.1.</strong> Las Autotools</a></li><li class="chapter-item expanded "><a href="../../../content/fthr-rdg/bld-sys/meson.html"><strong aria-hidden="true">6.3.2.</strong> Meson</a></li></ol></li><li class="chapter-item expanded "><a href="../../../content/fthr-rdg/sect/prog-prac.html"><strong aria-hidden="true">6.4.</strong> Mejores pr谩cticas de programaci贸n</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><a href="../../../content/book/struct/biblio.html">Bibliograf铆a</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">La plataforma de desarrollo GLib/GTK</h1>

                    <div class="right-buttons">
                        <a href="../../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/gersonbdev/glib-gtk-libro" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="listas"><a class="header" href="#listas">Listas</a></h1>
<p>GLib proporciona listas gen茅ricas con enlaces simples y dobles, <code>GSList</code> y <code>GList</code>, respectivamente. Estos se implementan como listas de <code>gpointer</code>; puede usarlos para contener enteros con las macros <code>GINT_TO_POINTER</code> y <code>GPOINTER_TO_INT</code>. <code>GSList</code> y <code>GList</code> tienen casi las mismas API, excepto que hay una funci贸n <code>g_list_previous()</code> y no <code>g_slist_previous()</code>. Esta secci贸n discutir谩 <code>GSList</code> pero todo tambi茅n se aplica a la lista doblemente enlazada.</p>
<p><a id="glib-gslist-cell"></a></p>
<pre><code class="language-c">typedef struct _GSList GSList;

struct _GSList
{
  gpointer data;
  GSList *next;
};
</code></pre>
<div class="caption">
<p><span class="glib-gslist-cell">Listado</span>: Celda <code>GSList</code>.</p>
</div>
<p>Una celda <code>GSList</code> es una estructura autoexplicativa que se muestra en el <span class="glib-gslist-cell">Listado</span>. Los campos de estructura son p煤blicos, por lo que puede usarlos directamente para acceder a los datos o para recorrer la lista.</p>
<p>En la implementaci贸n de GLib, la lista vac铆a es simplemente un puntero <code>NULL</code>. Siempre es seguro pasar <code>NULL</code> a las funciones de lista, ya que es una lista v谩lida de longitud 0. El c贸digo para crear una lista y agregar un elemento podr铆a verse as铆:</p>
<pre><code class="language-c">GSList *list = NULL;
gchar *element = g_strdup (&quot;a string&quot;);
list = g_slist_append (list, element);
</code></pre>
<p>Las listas GLib tienen una influencia Lisp notable; la lista vac铆a es un valor especial &quot;nil&quot; por esa raz贸n. <code>g_slist_prepend()</code> funciona de forma muy similar a <code>cons</code> -- es una operaci贸n de tiempo constante <code>(O(1))</code> que agrega una nueva celda al principio de la lista.</p>
<p><a id="glib-listchanging"></a></p>
<pre><code class="language-c">#include &lt;glib.h&gt;

GSList * g_slist_append (GSList *list, gpointer data);
GSList * g_slist_prepend (GSList *list, gpointer data);
GSList * g_slist_insert (GSList *list, gpointer data, gint position);
GSList * g_slist_remove (GSList *list, gconstpointer data);
</code></pre>
<div class="caption">
<p><span class="glib-listchanging">Listado</span>: Cambiar el contenido de la lista vinculada.</p>
</div>
<p>El <span class="glib-listchanging">Listado</span> muestra las funciones b谩sicas para cambiar el contenido de <code>GSList</code>. Para todos estos, debe asignar el valor de retorno a su puntero de lista en caso de que cambie el encabezado de la lista. Tenga en cuenta que GLib <em>no</em> almacena un puntero al final de la lista, por lo que las funciones de agregar, insertar y eliminar se ejecutan en <code>O(n)</code> tiempo, con <code>n</code> la longitud de la lista.</p>
<p>GLib se encargar谩 de los problemas de memoria, desasignando y asignando celdas de lista seg煤n sea necesario. Por ejemplo, el siguiente c贸digo eliminar铆a el elemento agregado anteriormente y vaciar铆a la lista:</p>
<pre><code class="language-c">list = g_slist_remove (list, element);
</code></pre>
<p><code>list</code> ahora es <code>NULL</code>. A煤n tienes que liberar <code>element</code> t煤 mismo, por supuesto.</p>
<p>Para acceder a un elemento de lista, consulte la estructura <code>GSList</code> directamente:</p>
<pre><code class="language-c">gchar *my_data = list-&gt;data;
</code></pre>
<p>Para iterar sobre la lista, puede escribir un c贸digo como este:</p>
<pre><code class="language-c">GSList *l;

for (l = list; l != NULL; l = l-&gt;next)
  {
    gchar *str = l-&gt;data;
    g_print (&quot;Element: %s\n&quot;, str);
  }
</code></pre>
<p><a id="glib-listfree"></a></p>
<pre><code class="language-c">#include &lt;glib.h&gt;

typedef void (* GDestroyNotify) (gpointer data);

void g_slist_free (GSList *list);
void g_slist_free_full (GSList *list, GDestroyNotify free_func);
</code></pre>
<div class="caption">
<p><span class="glib-listfree">Listado</span>: Liberar listas enteras vinculadas.</p>
</div>
<p>El <span class="glib-listfree">Listado</span> muestra funciones para borrar una lista completa. <code>g_slist_free()</code> elimina todos los enlaces de una sola vez. <code>g_slist_free()</code> no tiene valor de retorno porque siempre ser铆a <code>NULL</code>, y simplemente puede asignar ese valor a su lista si lo desea. Obviamente, <code>g_slist_free()</code> libera solo las celdas de la lista; no tiene forma de saber qu茅 hacer con el contenido de la lista. La funci贸n m谩s inteligente <code>g_slist_free_full()</code> toma un segundo argumento con un puntero de funci贸n de destrucci贸n que se llama en los datos de cada elemento. Para liberar la lista que contiene cadenas asignadas din谩micamente, puede escribir:</p>
<pre><code class="language-c">g_slist_free_full (list, g_free);

/* If list may be used later: */
list = NULL;
</code></pre>
<p>Esto es equivalente a escribir:</p>
<pre><code class="language-c">GSList *l;

for (l = list; l != NULL; l = l-&gt;next)
  g_free (l-&gt;data);

g_slist_free (list);
list = NULL;
</code></pre>
<p>Construir una lista usando <code>g_slist_append()</code> es una <em>terrible</em> idea; use <code>g_slist_prepend()</code> y luego llame a <code>g_slist_reverse()</code> si necesita elementos en un orden en particular. Si prev茅 agregar con frecuencia a una lista, tambi茅n puede mantener un puntero al 煤ltimo elemento.</p>
<blockquote>
<p><strong> Nota:</strong> Una forma m谩s conveniente es usar el tipo de datos GQueue: una cola de dos extremos que mantiene un puntero a la cabeza, un puntero a la cola y el longitud de la lista doblemente enlazada.</p>
</blockquote>
<p>El siguiente c贸digo se puede usar para realizar agregados eficientes:</p>
<pre><code class="language-c">void
efficient_append (GSList   **list,
                  GSList   **list_end,
                  gpointer   data)
{
  g_return_if_fail (list != NULL);
  g_return_if_fail (list_end != NULL);

  if (*list == NULL)
    {
      g_assert (*list_end == NULL);

      *list = g_slist_append (*list, data);
      *list_end = *list;
    }
  else
    {
      *list_end = g_slist_append (*list_end, data)-&gt;next;
    }
}
</code></pre>
<p>Para usar esta funci贸n, debe almacenar la lista y su final en alg煤n lugar, y pasar su direcci贸n a <code>efficient_append()</code>:</p>
<pre><code class="language-c">GSList* list = NULL;
GSList* list_end = NULL;

efficient_append (&amp;list, &amp;list_end, g_strdup (&quot;Foo&quot;));
efficient_append (&amp;list, &amp;list_end, g_strdup (&quot;Bar&quot;));
efficient_append (&amp;list, &amp;list_end, g_strdup (&quot;Baz&quot;));
</code></pre>
<p>Por supuesto, debe tener cuidado de no utilizar ninguna funci贸n de lista que pueda cambiar el final de la lista sin actualizar <code>list_end</code>.</p>
<p><a id="glib-listaccess"></a></p>
<pre><code class="language-c">#include &lt;glib.h&gt;

typedef void (* GFunc) (gpointer data, gpointer user_data);

GSList * g_slist_find (GSList *list, gconstpointer data);
GSList * g_slist_nth (GSList *list, guint n);
gpointer g_slist_nth_data (GSList *list, guint n);
GSList * g_slist_last (GSList *list);
gint g_slist_index (GSList *list, gconstpointer data);
void g_slist_foreach (GSList *list, GFunc func, gpointer user_data);
</code></pre>
<div class="caption">
<p><span class="glib-listaccess">Listado</span>: Acceder a datos en una lista vinculada.</p>
</div>
<p>Para acceder a los elementos de la lista, se proporcionan las funciones del <span class="glib-listaccess">Listado</span>. Ninguno de estos cambia la estructura de la lista. <code>g_slist_foreach()</code> aplica un <code>GFunc</code> a cada elemento de la lista.</p>
<p>Usado en <code>g_slist_foreach()</code>, su <code>GFunc</code> se llamar谩 en cada <code>list-&gt;data</code> en <code>list</code>, pasando el <code>user_data</code> que proporcion贸 a <code>g_slist_foreach()</code>. <code>g_slist_foreach()</code> es comparable a la funci贸n &quot;map&quot; de Scheme.</p>
<p>Por ejemplo, es posible que tenga una lista de cadenas y que desee poder crear una lista paralela con alguna transformaci贸n aplicada a las cadenas. Aqu铆 hay algo de c贸digo, usando la funci贸n <code>efficient_append()</code> de un ejemplo anterior:</p>
<pre><code class="language-c">typedef struct _AppendContext AppendContext;
struct _AppendContext
{
  GSList *list;
  GSList *list_end;
  const gchar *append;
};

static void
append_foreach (gpointer data,
                gpointer user_data)
{
  gchar *oldstring = data;
  AppendContext *context = user_data;

  efficient_append (&amp;context-&gt;list,
                    &amp;context-&gt;list_end,
                    g_strconcat (oldstring, context-&gt;append, NULL));
}

GSList *
copy_with_append (GSList      *list_of_strings,
                  const gchar *append)
{
  AppendContext context;

  context.list = NULL;
  context.list_end = NULL;
  context.append = append;

  g_slist_foreach (list_of_strings, append_foreach, &amp;context);

  return context.list;
}
</code></pre>
<p>GLib y GTK usan mucho el lenguaje de &quot;puntero de funci贸n y datos de usuario&quot;. Si tiene experiencia en programaci贸n funcional, esto es muy parecido a usar expresiones lambda para crear un <em>cierre</em>. (Un cierre combina una funci贸n con un <em>environment</em> -- un conjunto de enlaces nombre-valor. En este caso, el &quot;environment&quot; son los datos de usuario que pasa a <code>append_foreach()</code>, y el &quot;cierre&quot; es la combinaci贸n del puntero de funci贸n y los datos del usuario).</p>
<p><a id="glib-listmanip"></a></p>
<pre><code class="language-c">#include &lt;glib.h&gt;

guint g_slist_length (GSList *list);
GSList * g_slist_concat (GSList *list1, GSList *list2);
GSList * g_slist_reverse (GSList *list);
GSList * g_slist_copy (GSList *list);
</code></pre>
<div class="caption">
<p><span class="glib-listmanip">Listado</span>: Manipular una lista vinculada.</p>
</div>
<p>Hay algunas pr谩cticas rutinas de manipulaci贸n de listas, listadas en <span class="glib-listmanip">Listado</span>. Con la excepci贸n de <code>g_slist_copy()</code>, todos estos afectan las listas en el lugar. Lo que significa que debe asignar el valor de retorno y olvidarse del puntero pasado, tal como lo hace al agregar o eliminar elementos de la lista. <code>g_slist_copy()</code> devuelve una lista reci茅n asignada, por lo que puede continuar usando ambas listas y debe liberar ambas listas eventualmente.</p>
<p><a id="glib-listsorted"></a></p>
<pre><code class="language-c">#include &lt;glib.h&gt;

typedef gint (* GCompareFunc) (gconstpointer a, gconstpointer b);

GSList * g_slist_insert_sorted (GSList *list, gpointer data, GCompareFunc func);
GSList * g_slist_sort (GSList *list, GCompareFunc compare_func);
GSList * g_slist_find_custom (GSList *list, gconstpointer data, GCompareFunc func);
</code></pre>
<div class="caption">
<p><span class="glib-listsorted">Listado</span>: Listas ordenadas.</p>
</div>
<p>Finalmente, hay algunas disposiciones para listas ordenadas, que se muestran en <span class="glib-listsorted">Listado</span>. Para usarlos, debe escribir un <code>GCompareFunc</code>, que es como la funci贸n de comparaci贸n en el est谩ndar C <code>qsort()</code>.</p>
<p>Si <code>a &lt; b</code> , <code>GCompareFunc</code> deber铆a devolver un valor negativo; si <code>a &gt; b</code> un valor positivo; si <code>a == b</code> deber铆a devolver 0.</p>
<p>Una vez que tenga una funci贸n de comparaci贸n, puede insertar un elemento en una lista ya ordenada u ordenar una lista completa. Las listas se ordenan en orden ascendente. Incluso puedes reciclar tu GCompareFunc para encontrar elementos de la lista, usando <code>g_slist_find_custom()</code>.</p>
<p>Tenga cuidado con las listas ordenadas; su mal uso puede volverse muy ineficaz r谩pidamente. Por ejemplo, <code>g_slist_insert_sorted()</code> es una operaci贸n <code>O(n)</code>, pero si la usa en un bucle para insertar varios elementos, el bucle se ejecuta en tiempo cuadr谩tico (<code>O(n^2)</code>). Es mejor simplemente anteponer todos sus elementos y luego llamar a <code>g_slist_sort()</code>. <code>g_slist_sort()</code> se ejecuta en <code>O(n log n)</code>.</p>
<p>Tambi茅n puede usar la estructura de datos <code>GSequence</code> para datos ordenados. <code>GSequence</code> tiene una API de lista, pero se implementa internamente con un 谩rbol binario equilibrado.</p>
<!-- Habilitacion del enumeramiento de referencias -->
<div class="glib-refs"></div>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../../content/glib/data-struct/data-struct.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="../../../content/glib/data-struct/trees.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../../content/glib/data-struct/data-struct.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="../../../content/glib/data-struct/trees.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript" src="../../.././src/assets/js/refs-ch.js"></script>
        <script type="text/javascript" src="../../.././src/assets/js/refs-biblio.js"></script>
        <script type="text/javascript" src="../../.././src/assets/js/refs-intro.js"></script>
        <script type="text/javascript" src="../../.././src/assets/js/refs-glib.js"></script>
        <script type="text/javascript" src="../../.././src/assets/js/refs-oop-semi.js"></script>
        <script type="text/javascript" src="../../.././src/assets/js/refs-oop-gobj.js"></script>
        <script type="text/javascript" src="../../.././src/assets/js/refs-gtk-app-arch.js"></script>
    </body>
</html>
